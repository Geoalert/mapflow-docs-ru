
Пользовательский интерфейс web-приложения Mapflow 
===================================================

Откройте web-приложение пройдя по ссылке https://app.mapflow.ai.

Зарегистрируйтесь или войдите используя свой Google аккаунт.

Как запускать обработку 
------------------------

Пользоваться платформой очень просто. Ниже отражен и описан пошаговый процесс запуска обработки: 

.. figure:: _static/ui_flow_basic.png
   :alt: UI Mapflow – run flow
   :align: center
   :width: 15cm


1. Источник данных
   
   1.1. Ресурсы Mapflow

   Платформа Mapflow получает данные ДЗЗ из глобальных источников, включая коммерческих провайдеров спутниковой съемки. На этом шаге вы можете воспользоваться этими возможностями и задать **географическую область на карте** и **источник данных / файл с изображением**, по которым должна быть осуществлена обработка.

.. figure:: _static/ui_map_select_source.png
   :alt: UI Mapflow – define AOI
   :align: center
   :width: 15cm

.. note:: 
   Используйте GeoJSON - это очень удобный формат для обмена геоданными и отображения их на web-картах.


Пример области обработки в формате GeoJSON:

.. code:: json

    {
      "type": "Polygon",
      "coordinates": [
        [
          [
            37.490057513654946,
            55.923029653520395
          ],
          [
            37.490057513654946,
            55.949815087874605
          ],
          [
            37.54308202484029,
            55.949815087874605
          ],
          [
            37.54308202484029,
            55.923029653520395
          ],
          [
            37.490057513654946,
            55.923029653520395
          ]
        ]
      ]
    } 

:download:`Скачайте GeoJSON <_static/_downloads/buildings_aoi.geojson>`
   

   1.2. Обработка своих данных
   
   Также возможно загружать свои собственные данные ДЗЗ для обработки.

.. important:: 
   В бета версии Mapflow доступен только дефолтный источник (**Mapbox Satellite**). Отправьте нам запрос на использование функционала API (см **API DOC**) если хотите задавать другие источники обработки или загружать файлы в формате GeoTIFF.


2. AI модель

Выберите одну из Моделей обработки (:doc:`См описание моделей <pipelines>`).

3. Пост-обработка

На данном шаге ресурсы Mapflow позволяют выбрать дополнительные параметры обработки (e.g. «Классификация» по типам зданий и «Высоты» для модели «Здания»)

.. important::
   Опция обработки зданий с высотами доступна с ограничением по минимальной области обработки (от 50 кв.км).


4. Запуск обработки

.. attention::
   После выбора всех параметров обработки отображается общая стоимость для выбранных данных. У вас на счете имеется 500 credits, которые начисляются при регистрации для ознакомления с функционалом Mapflow (:doc:`См тарифный план <prices>`).


Работа с результатами обработки
--------------------------------

Результаты обработки сохраняются в панели "История обработок". 
При открытии данной панели – отображается статус, а также подсвечиваются выбранные ранее параметры обработки, в основном окне.

.. figure:: _static/preview_button.png
   :alt: Preview results
   :align: center
   :width: 7cm

После окончания обработки, вы можете посмотреть результаты на интерактивной карте или скачать в виде векторных геоданных (GeoJSON).

.. important::
   При повторном запуске с теми же параметрами - запускается новая обработка.

Варианты отображения результатов обработки:

1. Скачать **GeoJSON** - формат геоданных, который нативно поддерживается библиотеками web-карт, такими как **Leaflet** (https://leafletjs.com/), или ГИС, такими как **QGIS** (https://qgis.org/).

2. "Открыть в geojson.io" - просмотр результатов во внешнем приложении с помощью прямой ссылки из Mapflow - пример: `geosjon.io <http://geojson.io/#data=data:application/json,%7B%22type%22%3A%20%22Polygon%22%2C%20%22coordinates%22%3A%20%5B%20%5B%20%5B%2037.490057513654946%2C%2055.923029653520395%20%5D%2C%20%5B%2037.490057513654946%2C%2055.949815087874605%20%5D%2C%20%5B%2037.543082024840288%2C%2055.949815087874605%20%5D%2C%20%5B%2037.543082024840288%2C%2055.923029653520395%20%5D%2C%20%5B%2037.490057513654946%2C%2055.923029653520395%20%5D%20%5D%20%5D%7D>`_.  

.. note:: 
   Так же, перейдя ссылке `geosjon.io <http://geojson.io/#data=data:application/json,%7B%22type%22%3A%20%22Polygon%22%2C%20%22coordinates%22%3A%20%5B%20%5B%20%5B%2037.490057513654946%2C%2055.923029653520395%20%5D%2C%20%5B%2037.490057513654946%2C%2055.949815087874605%20%5D%2C%20%5B%2037.543082024840288%2C%2055.949815087874605%20%5D%2C%20%5B%2037.543082024840288%2C%2055.923029653520395%20%5D%2C%20%5B%2037.490057513654946%2C%2055.923029653520395%20%5D%20%5D%20%5D%7D>`_, вам предоставляется возможность посмотреть результаты и сохранить их в других форматах (CSV, KML, GeoJSON, TopoJSON, WKT, Shapefile). Для этого в строке меню выберите Save и нужный вам формат.

.. figure:: _static/geojson.io.png
   :alt: Preview map
   :align: center
   :width: 15cm

3. "Посмотреть на карте" показывает результат обработки поверх исходного изображения. Это самый быстрый способ посмотреть результаты.

.. figure:: _static/preview_map.png
   :alt: Preview map
   :align: center
   :width: 15cm

Работа с API
-------------

Mapflow предоставляет сервис Rest API, чтобы запускать обработки и получать результаты из внешних приложений.
Если вы разрабатываете приложение и хотите использовать API - посмотрите :doc:`Документацию API <../docs_api/processing_api>` и свяжитесь с нами.

